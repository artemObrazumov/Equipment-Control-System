# Система управления спецтехникой
Приложение на Java Spring Boot для автоматизации управления спецтехникой

# Роли пользователей
Приложение подразумевает пользователей с 4 возможными ролями:
1. `ROLE_WORKER (сокр. worker)` - Мастер бригады
2. `ROLE_UNIT_MANAGER (сокр. manager)` - ответственный логист в подразделении
3. `ROLE_DISPATCHER (сокр. dispatcher)` - диспетчер
4. `ROLE_ADMIN (сокр. admin)` - администратор системы

Сокращенные варианты наименований ролей применяются при описании путей.
Если определенный путь имеет префикс, например [worker], то это значит,
для выполнения данного запроса необходима роль мастера бригады, при этом 
другие роли не подойдут. Префикс [worker+] означал бы, что необходима роль
мастера бригадира и выше.

# Пути

## Авторизация

### Вход в аккаунт

- `POST /auth/sign-in`
- Производит вход в аккаунт
- Возвращает JWT-токен

## Пользователи

### Список пользователей
- [{user_role}+] `GET /users?role={роль}`
- Возвращает список пользователей по определенной роли
- - Для применения этой функции пользователю необходимо иметь роль выше той, что нужно найти

### Регистрация пользователя
- [manager+] `POST /users`
- Создает пользователя
- Возвращает данные пользователя (включая id)

### Изменение роли пользователя
- [{user_role}+] `UPDATE /users/${id}/changerole`
- Изменяет роль пользователя 
- Для применения этой функции пользователю необходимо иметь роль выше той, что нужно поставить

## Базы

### Получение списка баз

- [worker+] `GET /base?unit={id}`
- Возвращает все базы выбранного подразделения
- возвращает Bad request, если не указан код подразделения

### Добавление базы

- [manager+] `POST /base`
- Добавляет базу к спецподразделению
- Возвращает данные базы (включая id)

### Редактирование базы

- [manager+] `UPDATE /base/${id}`
- Изменяет данные базы

### Удаление базы

- [manager+] `DELETE /base/${id}`
- Удаляет базу

## Спецтехника

### Получение видов спецтехники
- [worker+] `GET /equipment?q={поиск}`
- Возвращает виды спецтехники по указанному запросу (или все виды, если запрос отсутствует)

### Добавление новых видов спецтехники
- [admin] `POST /equipment/addEquipment`
- Добавляет вид спецтехники
- Возвращает данные вида техники (включая id)

### Редактирование видов спецтехники

- [manager+] `UPDATE /equipment/${id}`
- Изменяет данные вида спецтехники

### Удаление видов спецтехники

- [manager+] `DELETE /equipment/${id}`
- Удаляет вид спецтехники

### Добавление новой техники
- [admin] `POST /equipment/namedEquipment`
- Добавляет идентифицированную спецтехнику
- Возвращает данные техники (включая id)

### Получение списка техники подразделения
- [worker+] `GET /equipment/namedEquipment/equipmentOnBase/${id}`
- Возвращает список идентифицированной спецтехники
- возвращает Bad request, если не указан код подразделения

### Детали техники
- [worker+] `GET /equipment/namedEquipment/${id}`
- Возвращает детали техники + детали ее типа + историю перемещений техники

## Заявка

### Просмотр заявок
- [manager] `GET /requests`
- Возвращает все заявки, отправленные в службу логистики (подразделение автоматически подхватывается с помощью данных пользователя из JWT-токена)

### Создание заявки
- [worker] `POST /requests`
- Создает заявку
- Возвращает урезанные данные заявки (включая id)
- Урезанные данные отличаются от полных отсутствием вложенных объектов

## Оповещения

### Список уведомлений

- `GET /notifications`
- Возвращает список последних уведомлений пользователя
